<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

<app-toolbar></app-toolbar>

<div class="container py-5">
    <div class="row mt-5" *ngIf="alert.show">
      <div class="col-sm-12 col-md-7 mx-auto">
        <div class="alert alert-success alert-fixed-top" [ngClass]="{'show': showSuccess}" *ngIf="showSuccess">
          {{ alertMessage }}
        </div>
      </div>
      <div class="col-sm-12 col-md-6 mx-auto">  
        <div class="alert alert-danger alert-fixed-top" [ngClass]="{'show': showError}" *ngIf="showError" style="margin-left: 65px;">
          {{ alertMessage }}
        </div>
      </div>
      <div class="col-sm-12 col-md-10 mx-auto">  
        <div class="alert alert-warning alert-fixed-top" [ngClass]="{'show': showAlert}" *ngIf="showAlert" style="margin-left: 60px;">
          {{ alertMessage }}
        </div>
      </div>
    </div>
</div>
<section>
  <div>
    <div style="display: grid;place-items: center;">
      <p style="font-size: xx-large;margin-top: -54px;">INGRESO DE MEMBRESÍA</p>
    </div>
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-12">
        <!-- formulario de busqueda y -->
        <form [formGroup]="search_form"> 
          <div class="row g-0">
            <!-- Datos personales -->
            <div class="card">
             <div class="card-header company-card-header"><h5 class="card-title">Datos Personales</h5></div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Tipo Doc. Ide</label>
                      <select formControlName="icedula" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('icedula').errors }">
                        <option></option>
                        <option *ngFor="let document of documentTypeList" value="{{ document.value }}">{{ document.value }}</option>
                      </select>                     
                      <div *ngIf="submitted && search_form.get('icedula').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('icedula').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev2">Identificación</label>
                      <input type="text" formControlName="xrif_cliente" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xrif_cliente').errors }" (change)="Validation()"/>
                      <div *ngIf="submitted && search_form.get('xrif_cliente').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xrif_cliente').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required">Nombre del Cliente</label>
                      <input type="text" formControlName="xnombre" class="form-control form-control-lg" required [ngClass]="{ 'is-invalid' : submitted && search_form.get('xnombre').errors }" />
                      <div *ngIf="submitted && search_form.get('xnombre').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xnombre').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Apellido del Cliente</label>
                      <input type="text" formControlName="xapellido" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xapellido').errors }" />
                      <div *ngIf="submitted && search_form.get('xapellido').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xapellido').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline ">
                      <label class="form-label required" for="form3Examplea2"> Fecha de nacimiento</label>
                      <input type="date" formControlName="fnac" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('fnac').errors }" />
                      <div *ngIf="submitted && search_form.get('fnac').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('fnac').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="row" style="display: -webkit-box;width: auto;">
                    <div class="mb-3 row">
                      <ng-template #rt let-r="result" let-t="term">
                        <ng-container *ngIf="r.flag">
                          <img [src]="'https://upload.wikimedia.org/wikipedia/commons/' + r.flag" class="flag-icon" />
                        </ng-container>
                        <ngb-highlight [result]="r.name" [term]="t"></ngb-highlight>
                      </ng-template>
            
                      <div class="col-md-4 mb-4 pb-2" *ngIf="activaCampo">
                        <div class="form-outline">
                          <label class="form-label" for="form3Examplev2">Escoje el Pais</label>
                          <input
                            id="typeahead-template"
                            type="text"
                            class="form-control form-control-lg"
                            [(ngModel)]="model"
                            [ngbTypeahead]="search"
                            [resultTemplate]="rt"
                            [inputFormatter]="formatter"
                            (selectItem)="prueba($event)"
                          />
                        </div>
                      </div>
                      <div class="col-md-3" *ngIf="showFlag" style="margin-left: 11px;">
                        <label class="form-label" for="form3Examplev4">Pais</label>
                        <img [src]="selectedFlagUrl" class="flag-icon-result" />
                      </div>
                      <div class="col-md-8 mb-4 pb-2">
                        <div class="form-outline">
                          <label class="form-label required">Número de Teléfono</label>
                          <input type="tel" formControlName="xtelefono" class="form-control form-control-lg" maxlength="12" (click)="checkPhoneNumber()"
                            [ngClass]="{ 'is-invalid' : submitted && search_form.get('xtelefono').errors }" (change)="getValueCellPhone()"/>
                          <div *ngIf="submitted && search_form.get('xtelefono').errors" class="invalid-feedback">
                            <div *ngIf="search_form.get('xtelefono').errors.required">Se requiere completar el campo</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label " for="form3Examplev3">Teléfono Alterno</label>
                      <input type="text" formControlName="xtelefono_prop" class="form-control form-control-lg" maxlength = "12" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xtelefono_prop').errors }" />
                      <div *ngIf="submitted && search_form.get('xtelefono_prop').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xtelefono_prop').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Correo Electrónico</label>
                      <input type="email" formControlName="email" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('email').errors }" (change)="activePassword()">
                      <div *ngIf="submitted && search_form.get('email').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('email').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-6 pb-2" style="background-color: #0086ff30;border-radius: 15px;" *ngIf="activaClave">
                    <div class="form-outline">
                      <p for="form3Examplev3" class="form-label">Contraseña predeterminada</p>
                      <h5>
                        <input formControlName="xclave_club" style="background-color:transparent;background: inherit;border: 0px;font-weight: bolder;margin-right: -167px;font-size: 1.1rem;">
                      </h5>
                    </div>
                  </div>
                  <!-- <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">País</label>
                      <select formControlName="cpais" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cpais').errors }" (change)="getState()">
                        <option></option>
                        <option *ngFor="let country of CountryList" value="{{ country.id }}">{{ country.value }}</option>
                      </select>                     
                      <div *ngIf="submitted && search_form.get('cpais').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('cpais').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>  -->
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Provincia</label>
                      <select formControlName="cestado" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cestado').errors } " (change)="getCity()">
                        <option></option>
                        <option *ngFor="let estado of StateList" value="{{ estado.id }}">{{ estado.value }}</option>
                      </select>                     
                      <div *ngIf="submitted && search_form.get('cestado').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('cestado').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Distrito</label>
                          <select formControlName="cciudad" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cciudad').errors } " (change)="getTownship()">
                            <option></option>
                            <option *ngFor="let ciudad of CityList" value="{{ ciudad.id }}">{{ ciudad.value }}</option>
                          </select>                     
                          <div *ngIf="submitted && search_form.get('cciudad').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('cciudad').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Corregimiento</label>
                          <select formControlName="ccorregimiento" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('ccorregimiento').errors } ">
                            <option></option>
                            <option *ngFor="let township of townshipList" value="{{ township.id }}">{{ township.value }}</option>
                          </select>                     
                          <div *ngIf="submitted && search_form.get('ccorregimiento').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('ccorregimiento').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="col-md-3 mb-4 pb-2">
                    <div class="form-outline ">
                      <label class="form-label required" for="form3Examplea2"> Zona Postal</label>
                      <input type="text" formControlName="xzona_postal" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xzona_postal').errors }" />
                      <div *ngIf="submitted && search_form.get('xzona_postal').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xzona_postal').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div> -->
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline ">
                      <label class="form-label required" for="form3Examplea2">Dirección Fiscal</label>
                      <input type="text" formControlName="xdireccionfiscal" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xdireccionfiscal').errors }" />
                      <div *ngIf="submitted && search_form.get('xdireccionfiscal').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xdireccionfiscal').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Datos del vehiculo -->
            <div class="card">
             <div class="card-header company-card-header"><h5 class="card-title">Datos del Vehículo</h5></div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Placa</label>
                      <input type="text" formControlName="xplaca" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xplaca').errors }" (change)="OperatioValidationPlate()" />
                      <div *ngIf="submitted && search_form.get('xplaca').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xplaca').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                </div>
                  <div class="col-sm-12 col-md-4">
                    <div class="form-outline">
                      <label class="form-label" for="form3Examplev5">Marca</label>
                      <div>
                        <ng-autocomplete [data]="marcaList" [searchKeyword]="keyword" 
                                         placeholder="Seleccionar Marca" (keyup)="onMarcaInput($event)"
                                         [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundMarcaTemplate"
                                         [(ngModel)]="marcaInput">
                        </ng-autocomplete>
                        
                        <ng-template #itemTemplate let-item>
                          <a [innerHTML]="item.value"></a>
                        </ng-template>
                        
                        <!-- Personaliza el template para "Marca" -->
                        <ng-template #notFoundMarcaTemplate let-notFound>
                          <div>
                            <p>No se encontraron marcas.</p>
                            <button type="button" class="btn btn-success" (click)="createMarca(marcaInput)">Agregar Marca</button>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <!-- Sección de Modelo -->
                  <div class="col-sm-12 col-md-4">
                    <div class="form-outline">
                      <label class="form-label" for="form3Examplev5">Modelo</label>
                      <div>
                        <ng-autocomplete [data]="modeloList" [searchKeyword]="keyword" 
                                        placeholder="Seleccionar Modelo" (selected)='getVersionData($event)'
                                        [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundModeloTemplate"
                                        [(ngModel)]="modeloInput">                                 
                        </ng-autocomplete>
                                  
                        <ng-template #itemTemplate let-item>
                          <a [innerHTML]="item.value"></a>
                        </ng-template>
                                  
                        <!-- Personaliza el template para "Modelo" -->
                        <ng-template #notFoundModeloTemplate let-notFound>
                          <div>
                            <p>No se encontraron modelos.</p>
                            <button type="button" class="btn btn-success" (click)="createModelo(modeloInput)">Agregar Modelo</button>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Sección de Versión -->
                  <div class="col-sm-12 col-md-4">
                    <div class="form-outline">
                      <label class="form-label" for="form3Examplev5">Versión</label>
                      <div>
                        <ng-autocomplete [data]="versionList" [searchKeyword]="keyword" 
                                        placeholder="Seleccionar Versión" (selected)='searchVersion($event)'
                                        [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundVersionTemplate"
                                        [(ngModel)]="versionInput">                                 
                        </ng-autocomplete>
                                  
                        <ng-template #itemTemplate let-item>
                          <a [innerHTML]="item.value"></a>
                        </ng-template>
                                  
                        <!-- Personaliza el template para "Versión" -->
                        <ng-template #notFoundVersionTemplate let-notFound>
                          <div>
                            <p>No se encontraron versiones.</p>
                            <button type="button" class="btn btn-success" (click)="createVersion(versionInput)">Agregar Versión</button>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required">Año del automovi</label>
                      <input type="number" formControlName="cano" class="form-control form-control-lg"  [ngClass]="{ 'is-invalid' : submitted && search_form.get('cano').errors }" />
                      <div *ngIf="submitted && search_form.get('cano').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('cano').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required">Número de Pasajeros</label>
                      <input type="text" formControlName="ncapacidad_p" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('ncapacidad_p').errors }" />
                      <div *ngIf="submitted && search_form.get('ncapacidad_p').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('ncapacidad_p').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required">País Proveniente</label>
                      <input type="text" formControlName="xpais_proveniente" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xpais_proveniente').errors }" />
                      <div *ngIf="submitted && search_form.get('xpais_proveniente').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xpais_proveniente').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev3">Color</label>
                      <select formControlName="xcolor" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xcolor').errors } ">
                        <option></option>
                        <option *ngFor="let color of colorList" value="{{ color.value }}">{{ color.value }}</option>
                      </select>
                      <div *ngIf="submitted && search_form.get('xcolor').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xcolor').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev2">Serial de Carroceria</label>
                      <input type="text" formControlName="xserialcarroceria" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xserialcarroceria').errors }" />
                      <div *ngIf="submitted && search_form.get('xserialcarroceria').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xserialcarroceria').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline ">
                      <label class="form-label required" for="form3Examplea8">Serial de Motor</label>
                      <input type="text" formControlName="xserialmotor" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xserialmotor').errors }" />
                      <div *ngIf="submitted && search_form.get('xserialmotor').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('xserialmotor').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">                        
                      <label class="form-label required" for="form3Examplev4">Uso</label>
                      <select formControlName="cuso" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cuso').errors } ">
                        <option></option>
                        <option *ngFor="let Utility of UtilityVehicle" value="{{ Utility.id }}">{{ Utility.value }}</option>
                      </select>                       
                      <div *ngIf="submitted && search_form.get('cuso').errors"  class="invalid-feedback">
                        <div *ngIf="search_form.get('cuso').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">                        
                      <label class="form-label required" for="form3Examplev4">Tipo de Vehículo</label>
                      <select formControlName="ctipovehiculo" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('ctipovehiculo').errors } ">
                        <option></option>
                        <option *ngFor="let vehicle of TypeVehicle" value="{{ vehicle.id }}">{{ vehicle.value }}</option>
                      </select>                      
                      <div *ngIf="submitted && search_form.get('ctipovehiculo').errors"  class="invalid-feedback">
                        <div *ngIf="search_form.get('ctipovehiculo').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline">
                        <label class="form-label" for="form3Examplev4">Mes de Vencimiento de Placa</label>
                        <select formControlName="xmes" class="form-control" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xmes').errors }">
                            <option></option>
                            <option *ngFor="let month of months" value="{{ month }}">{{ month }}</option>
                        </select>
                        <div *ngIf="submitted && search_form.get('xmes').errors"  class="invalid-feedback">
                            <div *ngIf="search_form.get('xmes').errors.required">{{ "EVENTS.SERVICEORDER.REQUIREDDOCUMENTTYPE" | translate }}</div>
                        </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-4 pb-2">
                    <div class="form-outline ">
                      <label class="form-label required" for="form3Examplea8">Kilometraje</label>
                      <input type="number" formControlName="nkilometraje" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('nkilometraje').errors }" />
                      <div *ngIf="submitted && search_form.get('nkilometraje').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('nkilometraje').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--Detalles del plan -->
            <div class="cards">
             <div class="card-header company-card-header">
               <h5 class="card-title">Detalles del plan</h5>
             </div>
              <div class="row" style="padding: 10px;">
                <div class="col-md-3 mb-4 pb-2 mb-md-0 pb-md-0">
                  <div class="form-outline">
                    <label class="form-label required" for="form3Examplev5">Agente Autorizado</label>
                    <select formControlName="ccanal" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('ccanal').errors } ">
                      <option *ngFor="let canal of pipelineList" value="{{ canal.id }}">{{ canal.value }}</option>
                    </select>
                    <div *ngIf="submitted && search_form.get('ccanal').errors" class="invalid-feedback">
                      <div *ngIf="search_form.get('ccanal').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4 pb-2">
                  <div class="form-outline">
                    <label class="form-label required" for="form3Examplev4">Planes</label>
                    <select formControlName="cplan" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cplan').errors }" (change)="searchService()">
                      <option></option>
                      <option *ngFor="let plan of planList" value="{{ plan.control }}">{{ plan.value }}</option>
                    </select>
                    <div *ngIf="submitted && search_form.get('cplan').errors" class="invalid-feedback">
                      <div *ngIf="search_form.get('cplan').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
                <div class="card" style= "width: 489px;box-shadow: 0px 0px 30px rgba(115, 128, 157, 0.1);-webkit-box-shadow: 0px 0px 30px rgba(115, 128, 157, 0.1);" *ngIf="bactivarservicios">      
                    <div class="card-body" style="display: -webkit-box; width: fit-content;">
                        <div class="col-2">
                          <div class="form-group">
                            <h5>
                              <input formControlName="ncobro" style="background-color:transparent;background: inherit;border: 0px;font-weight: bolder;margin-right: -167px;font-size: xxx-large;margin-top: 84px;">
                              <input formControlName="xmoneda" style="background-color:transparent;border: 0px;font-size: xx-large;">
                            </h5>
                          </div>
                        </div>
                        <div class="container">
                            <h5 class="font-weight-medium mb-0" style="font-family: revert;">Servicios que presta el plan</h5>
                            <h5 style="font-family: revert;">seleccionado</h5>
                            <ag-grid-angular #agGrid style="width: 42%; height: 250px;text-align: center;margin-top: 26px;" class="ag-theme-alpine" [rowData]="serviceList" [pagination]="true" [paginationAutoPageSize]="true" rowSelection="single" [enableCellChangeFlash]="true" (gridReady)="onServicesGridReady($event)">
                                <ag-grid-column headerName="" field="xtiposervicio" [width]="280" [sortable]="false"></ag-grid-column>
                            </ag-grid-angular>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4 pb-2">
                  <div class="form-outline">                        
                    <label class="form-label required" for="form3Examplev4">Cobertura</label>
                    <select formControlName="xcobertura" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('xcobertura').errors } " (change)="changeRcv()">
                      <option value="RCV">RCV</option>
                      <option value="AMPLIA">AMPLIA</option>
                      <!-- <option value="PERDIDA">PERDIDA TOTAL</option> -->
                    </select>                         
                    <div *ngIf="submitted && search_form.get('xcobertura').errors"  class="invalid-feedback">
                      <div *ngIf="search_form.get('xcobertura').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 mb-4 pb-2" *ngIf="bactivar_casco">
                  <div class="form-outline ">
                    <label class="form-label required" for="form3Examplea8">Suma Asegurada de Casco</label>
                    <input type="text" formControlName="msuma_casco" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('msuma_casco').errors }" />
                    <div *ngIf="submitted && search_form.get('msuma_casco').errors" class="invalid-feedback">
                      <div *ngIf="search_form.get('msuma_casco').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-2 mb-4 pb-2" *ngIf="bactivar_casco">
                  <div class="form-outline ">
                    <label class="form-label required" for="form3Examplea8">Prima de Casco</label>
                    <input type="text" formControlName="mprima_casco" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('mprima_casco').errors }" />
                    <div *ngIf="submitted && search_form.get('mprima_casco').errors" class="invalid-feedback">
                      <div *ngIf="search_form.get('mprima_casco').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
                <!-- <div class="col-sm-12 col-md-4">
                    <div class="form-check form-switch">
                        <label style="margin-left: 78px;margin-top: 13px;">¿Posee RCV?</label>
                        <div class="row">
                          <p class="col-sm-2 col-md-4" style="text-align: right;margin-left: -56px;">No</p>
                          <input type="checkbox" formControlName="brcv" class="form-check-input" [ngClass]="{ 'is-invalid' : submitted && search_form.get('brcv').errors }" style="margin-left: 122px;" (change)="changeRcv()"> 
                          <p class="col-sm-2 col-md-4" style="margin-left: 36px;">Si</p>
                      </div>
                        <div *ngIf="submitted && search_form.get('brcv').errors"  class="invalid-feedback">
                            <div *ngIf="search_form.get('brcv').errors.required">{{ "EVENTS.NOTIFICATIONS.REQUIREDVEHICLEDAMAGE" | translate }}</div>
                        </div>
                    </div>
                </div> -->
                <div class="col-md-3 mb-4 pb-2" *ngIf="bactivar_rcv">
                  <div class="form-outline">
                    <label class="form-label required" for="form3Examplev4">Planes RCV</label>
                    <select formControlName="cplan_rc" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('cplan_rc').errors }">
                      <option *ngFor="let planrcv of planRcvList" value="{{ planrcv.id }}">{{ planrcv.value }}</option>
                    </select>
                    <div *ngIf="submitted && search_form.get('cplan_rc').errors" class="invalid-feedback">
                      <div *ngIf="search_form.get('cplan_rc').errors.required">Se requiere completar el campo</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Detalles del recibo -->
            <div class="cards">
              <div class="card-header company-card-header"><h5 class="card-title">Vigencias del Contrato</h5></div>
              <div class="row" style="padding: 10px;">
                <div style="display: flex; align-items: center; justify-content: center;">
                  <div class="col-md-3 mb-4 pb-2 mb-md-0 pb-md-0">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev5">Fecha inicio del Contrato</label>
                      <input type="date" formControlName="fdesde_pol" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('fdesde_pol').errors }" />
                      <div *ngIf="submitted && search_form.get('fdesde_pol').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('fdesde_pol').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3 mb-4 pb-2 mb-md-0 pb-md-0">
                    <div class="form-outline">
                      <label class="form-label required" for="form3Examplev5">Fecha Final del Contrato</label>
                      <input type="date" formControlName="fhasta_pol" class="form-control form-control-lg" [ngClass]="{ 'is-invalid' : submitted && search_form.get('fhasta_pol').errors }" />
                      <div *ngIf="submitted && search_form.get('fhasta_pol').errors" class="invalid-feedback">
                        <div *ngIf="search_form.get('fhasta_pol').errors.required">Se requiere completar el campo</div>
                      </div>
                    </div>
                  </div>
                </div>
                <br>
                <div class="button" style="margin-top: 12px;">
                  <button [disabled]="loading" type="button" class="btn btn-light btn-lg" data-mdb-ripple-color="dark" (click)="onSubmit(search_form.value)">
                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                    Registrar Contrato
                  </button>
                  <!-- <button type="button" class="btn btn-light btn-lg" style="background-color: red;" (click)="onClearForm()">Limpiar Formulario</button> -->
                </div> 
              </div> 
            </div>

            
          </div>
        </form>
      </div>
    </div>
  </div>
</section>


 <app-footer></app-footer>
